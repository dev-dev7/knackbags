<!-- knack-home-responsive-image-banner -->
<div class="content full-height full-width">
  <picture class="full-width">
    <source media="(max-width: 600px)" id="homeHeroImageMobile" src="{{section.settings.mobile_image | img_url: 'master' }}')" data-src-1="{{section.settings.mobile_image | img_url: 'master' }}" data-src-2="{{section.settings.mobile_image_2 | img_url: 'master' }}" data-src-3="{{section.settings.mobile_image_3 | img_url: 'master' }}" data-src-4="{{section.settings.mobile_image_4 | img_url: 'master' }}"/>
    <source media="(max-width: 1000px)" id="homeHeroImageTablet" src="{{section.settings.tablet_image | img_url: 'master' }}')" data-src-1="{{section.settings.tablet_image | img_url: 'master' }}" data-src-2="{{section.settings.tablet_image_2 | img_url: 'master' }}" data-src-3="{{section.settings.tablet_image_3 | img_url: 'master' }}" data-src-4="{{section.settings.tablet_image_4 | img_url: 'master' }}"/>
    <source media="(max-width: 1200px)" id="homeHeroImageLaptop" src="{{section.settings.laptop_image | img_url: 'master' }}')" data-src-1="{{section.settings.laptop_image | img_url: 'master' }}" data-src-2="{{section.settings.laptop_image_2 | img_url: 'master' }}" data-src-3="{{section.settings.laptop_image_3 | img_url: 'master' }}" data-src-4="{{section.settings.laptop_image_4 | img_url: 'master' }}"/>
    <img id="homeHeroImageDesktop" data-src-1="{{section.settings.desktop_image | img_url: 'master' }}" data-src-2="{{section.settings.desktop_image_2 | img_url: 'master' }}" data-src-3="{{section.settings.desktop_image_3 | img_url: 'master' }}" data-src-4="{{section.settings.desktop_image_4 | img_url: 'master' }}"/>
  </picture>
</div>
<script>
  
  function initHomeHeroImage(homeHeroRandomIndex){
    
    // console.log(homeHeroRandomIndex);

    var homeHeroImageDesktop = document.getElementById("homeHeroImageDesktop");
    
    homeHeroImageDesktop.setAttribute("src",homeHeroImageDesktop.getAttribute("data-src-" + homeHeroRandomIndex));
    
    var homeHeroImageLaptop = document.getElementById("homeHeroImageLaptop");
    
    homeHeroImageLaptop.setAttribute("src",homeHeroImageLaptop.getAttribute("data-src-" + homeHeroRandomIndex));
    homeHeroImageLaptop.setAttribute("srcset",homeHeroImageLaptop.getAttribute("data-src-" + homeHeroRandomIndex));
    
    var homeHeroImageTablet = document.getElementById("homeHeroImageTablet");
    
    homeHeroImageTablet.setAttribute("src",homeHeroImageTablet.getAttribute("data-src-" + homeHeroRandomIndex));
    homeHeroImageTablet.setAttribute("srcset",homeHeroImageTablet.getAttribute("data-src-" + homeHeroRandomIndex));
    
    var homeHeroImageMobile = document.getElementById("homeHeroImageMobile");
    
    homeHeroImageMobile.setAttribute("src",homeHeroImageMobile.getAttribute("data-src-" + homeHeroRandomIndex));
    homeHeroImageMobile.setAttribute("srcset",homeHeroImageMobile.getAttribute("data-src-" + homeHeroRandomIndex));
    
    
  }
  var homeHeroCurrentIndex = Math.floor(Math.random() * Math.floor({{section.settings.rotator_size}})) + 1;
  
  initHomeHeroImage(homeHeroCurrentIndex);
  
  
  /**
  $(document).ready(function(){
    
    setTimeout(function(){
      setInterval(function(){ 
        homeHeroCurrentIndex++;
        if(homeHeroCurrentIndex > {{section.settings.rotator_size}}){
           homeHeroCurrentIndex = 1;
           }
           initHomeHeroImage(homeHeroCurrentIndex);
      }, 5000);
    },5000);
    
      
  });
  **/
  
  
</script>

<div style="position: absolute; width: 100%; height: 100%; left: 0; top: 0; {% if section.settings.show_mask %} background: rgba(0,0,0,.2); {% endif %} text-decoration: none; color: #fff;" href="{{ section.settings.link }}">
  <div class="layout horizontal center full-width full-height" >
    
    <div class="flex">
      <div class="layout vertical left full-width full-height">
        {% unless section.settings.title == blank %}
            <h2 class="h1 hero__title">
              <div class="animation-cropper">
                <div class="animation-contents">
              		{{ section.settings.title | newline_to_br }}
                </div>
              </div>
            </h2>
        {% endunless %}
        {% unless section.settings.caption == blank %}
          <div class="hero__caption">
            <div class="animation-cropper">
              <div class="animation-contents">
                {{ section.settings.caption | newline_to_br }}
                </div>
            </div>
          </div>
        {% endunless %}
        {% unless section.settings.link_text == blank %}
          <div>
            <div class="animation-cropper">
              <div class="animation-contents">
                <a href="{{ section.settings.link }}" class="btn-primary" style="position: relative; z-index: 2">
                  {{ section.settings.link_text }}
                </a>
              </div>
            </div>
          </div>
        {% endunless %}
      </div>
    </div>

  </div>
</div>
<a style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;" href="{{ section.settings.link }}"></a>

{% stylesheet %}


{% endstylesheet %}

{% javascript %}
{% endjavascript %}


{% schema %}
  {
    "name": "Responsive Image Banner",
    "class": "home-responsive-image-banner",
    "settings": [	
{
	"type": "range",
	"id": "rotator_size",
	"min": 1,
	"max": 4,
	"step": 1,
	"label": "Slide Count",
	"default": 1
},
	  {
        "type": "image_picker",
        "id": "desktop_image",
        "label": "Desktop Image"
      },
      {
        "type": "image_picker",
        "id": "desktop_image_2",
        "label": "Desktop Image 2"
      },
      {
        "type": "image_picker",
        "id": "desktop_image_3",
        "label": "Desktop Image 3"
      },
	  {
        "type": "image_picker",
        "id": "desktop_image_4",
        "label": "Desktop Image 4"
      },
{
        "type": "image_picker",
        "id": "laptop_image",
        "label": "Laptop Image"
      },
      {
        "type": "image_picker",
        "id": "laptop_image_2",
        "label": "Laptop Image 2"
      },
      {
        "type": "image_picker",
        "id": "laptop_image_3",
        "label": "Laptop Image 3"
      },
	  {
        "type": "image_picker",
        "id": "laptop_image_4",
        "label": "Laptop Image 4"
      },
      {
        "type": "image_picker",
        "id": "tablet_image",
        "label": "Tablet Image"
      },
	  {
        "type": "image_picker",
        "id": "tablet_image_2",
        "label": "Tablet Image 2"
      },
		{
        "type": "image_picker",
        "id": "tablet_image_3",
        "label": "Tablet Image 3"
      },
{
        "type": "image_picker",
        "id": "tablet_image_4",
        "label": "Tablet Image 4"
      },
      {
        "type": "image_picker",
        "id": "mobile_image",
        "label": "Mobile Image"
      },
	{
        "type": "image_picker",
        "id": "mobile_image_2",
        "label": "Mobile Image 2"
      },
	{
        "type": "image_picker",
        "id": "mobile_image_3",
        "label": "Mobile Image 3"
      },
{
        "type": "image_picker",
        "id": "mobile_image_4",
        "label": "Mobile Image 4"
      },
      {
        "type": "textarea",
        "id": "title",
        "label": "Heading",
        "default": "This is a heading."
      },
{
        "type": "textarea",
        "id": "caption",
        "label": "Caption",
        "default": "This is a caption."
      },
      {
        "type": "text",
        "id": "link_text",
        "label": "Button text",
        "default": "Optional button"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Button link"
      },{
   "type":      "checkbox",
   "id":        "show_mask",
   "label":     "Show Mask",
   "default":   true
}
    ],
    "presets": [{
      "name": "Responsive Image Banner",
      "category": "Version 2"
    }]
  }
{% endschema %}
